name = "brick-email-worker"
type = "service"
main = "src/index.js"
compatibility_date = "2024-12-19"
compatibility_flags = ["nodejs_compat"]

# Email Routing
[env.production]
routes = [
  { pattern = "*.afonsoingles.dev/**", zone_name = "afonsoingles.dev" }
]
vars = { ENVIRONMENT = "production" }

[[env.production.email_routing.matchers]]
pattern = "*@afonsoingles.dev"

# Environment variables/secrets are set via Cloudflare Dashboard or .env file
# Required secrets: WEBHOOK_URL, SENTRY_DSN (optional)

[env.development]
vars = { ENVIRONMENT = "development" }

# Observability
[observability]
enabled = true
